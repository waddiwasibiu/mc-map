<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baka 村结构坐标库</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <!-- 新增Three.js库用于3D可视化 -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/examples/js/controls/OrbitControls.js"></script>
    
    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1E293B',
                        server1: '#3B82F6',
                        server2: '#10B981'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        #canvas-container { position: relative !important; }

        .category-other {
            background-color: rgba(59, 130, 246, 0.9); /* 蓝色背景 */
            color: #ffffff; /* 白色文字 */
        }
        .category-1 {
            background-color: rgba(16, 185, 129, 0.9); /* 绿色背景 */
            color: #ffffff; /* 白色文字 */
        }
        .category-2 {
            background-color: rgba(249, 115, 22, 0.9); /* 橙色背景 */
            color: #ffffff; /* 白色文字 */
        }
        .category-3 {
            background-color: rgba(107, 114, 128, 0.9); /* 灰色背景 */
            color: #ffffff; /* 白色文字 */
        }
        
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .card-hover {
                transition: all 0.3s ease;
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            }
            .structure-image {
                background-color: #f0f0f0;
                background-size: cover;
                background-position: center;
            }
            .chart-container {
                transition: all 0.2s ease;
            }
            .chart-container:hover {
                transform: translateY(-2px);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            }
            .chart-modal-backdrop {
                background-color: rgba(0, 0, 0, 0.7);
                backdrop-filter: blur(4px);
            }
            .chart-modal-content {
                max-height: 80vh;
                width: 90vw;
                max-width: 800px;
            }
            #gitalk-container {
                font-family: 'Inter', sans-serif;
                color: #1E293B; /* 使用 dark 颜色 */
            }
            #gitalk-container .gt-comment-content {
                border-radius: 0.375rem; /* 与其他卡片的圆角一致 */
            }
            .shadow-soft {
                box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            }
            .blog-post-card {
                transition: transform 0.3s ease, box-shadow 0.3s ease;
                cursor: pointer;
            }
            .blog-post-card:hover {
                transform: translateY(-3px);
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }
            .post-detail-content {
                line-height: 1.8;
            }
            .post-detail-content p {
                margin-bottom: 1rem;
            }
            .post-detail-content h3 {
                font-size: 1.25rem;
                font-weight: 600;
                margin: 1.5rem 0 1rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-inter">
    <!-- 导航栏 -->
    <header class="bg-white shadow-md fixed top-0 left-0 right-0 z-40 transition-all duration-300 py-4">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-2">
                    <i class="fa fa-map-o text-primary text-2xl"></i>
                    <h1 class="text-xl font-bold text-dark">Baka 村 <span class="text-primary">结构坐标</span></h1>
                </div>
                
                <nav class="hidden md:flex space-x-6">
                    <a href="#home" class="text-gray-700 hover:text-primary transition-colors main-nav-link">首页</a>
                    <a href="#structures" class="text-gray-700 hover:text-primary transition-colors main-nav-link">结构列表</a>
                    <a href="#3d-coordinates" class="text-gray-700 hover:text-primary transition-colors main-nav-link">坐标立体图</a>
                    <a href="#about" class="text-gray-700 hover:text-primary transition-colors main-nav-link">关于我们</a>
                    <a href="#comments" class="text-gray-700 hover:text-primary transition-colors main-nav-link">评论区</a>
                    <a href="#blog" class="text-gray-700 hover:text-primary transition-colors blog-nav-link">帖子</a>
                </nav>
                
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="搜索结构或坐标..." class="pl-10 pr-4 py-2 rounded-full border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                        <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    
                    <button class="md:hidden text-gray-700 focus:outline-none" id="mobileMenuBtn">
                        <i class="fa fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
            
            <!-- 移动端菜单 -->
            <div id="mobileMenu" class="hidden md:hidden mt-4 pb-4">
                <a href="#home" class="block py-2 text-gray-700 hover:text-primary transition-colors main-nav-link">首页</a>
                <a href="#structures" class="block py-2 text-gray-700 hover:text-primary transition-colors main-nav-link">结构列表</a>
                <a href="#3d-coordinates" class="block py-2 text-gray-700 hover:text-primary transition-colors main-nav-link">坐标立体图</a>
                <a href="#about" class="block py-2 text-gray-700 hover:text-primary transition-colors main-nav-link">关于我们</a>
                <a href="#comments" class="block py-2 text-gray-700 hover:text-primary transition-colors main-nav-link">评论区</a>
                <a href="#blog" class="block py-2 text-gray-700 hover:text-primary transition-colors blog-nav-link">帖子</a>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main id="main-content" class="container mx-auto px-4 pt-24 pb-16">
        <!-- 欢迎部分 -->
        <section id="home" class="mb-12">
            <div class="bg-gradient-to-r from-primary/10 to-secondary/10 rounded-2xl p-8 shadow-lg">
                <div class="flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2 mb-6 md:mb-0">
                        <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">欢迎来到 Baka 村结构坐标库</h2>
                        <p class="text-gray-600 mb-6 text-lg">探索并分享《我的世界》中各种独特结构的坐标，让冒险更加便捷！</p>
                        <div class="flex flex-wrap gap-4">
                            <a href="#structures" class="px-6 py-3 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors shadow-lg shadow-primary/20 flex items-center">
                                <i class="fa fa-map-marker mr-2"></i> 浏览结构
                            </a>
                            
                        </div>
                    </div>
                    <div class="md:w-1/2 flex justify-center">
                        <div class="structure-image w-full h-64 rounded-xl" style="background-image: url('images/structures/1.png')"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 服务器选择和筛选 -->
        <section class="mb-8">
            <div class="bg-white rounded-xl shadow-md p-6">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div class="flex items-center gap-4">
                        <label for="serverSelector" class="font-medium text-gray-700">服务器:</label>
                        <select id="serverSelector" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                            <option value="server1">一区</option>
                            <option value="server2">二区</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center gap-4">
                        <label for="sortSelect" class="font-medium text-gray-700">排序方式:</label>
                        <select id="sortSelect" class="px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary">
                            <option value="nameAsc">名称 (升序)</option>
                            <option value="nameDesc">名称 (降序)</option>
                            <option value="type">结构类型</option>
                            <option value="coordinateCount">坐标数量</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- 功能展示部分 -->
        <section id="features" class="mb-12 bg-white rounded-xl shadow-md p-6">
            <h2 class="text-2xl font-bold text-dark mb-6">功能展示</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- 结构坐标功能 -->
                <div class="feature-card bg-gray-50 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow">
                    <div class="feature-image h-48 relative overflow-hidden">
                        <img src="images/structures/2.png" alt="结构坐标" class="w-full h-full object-cover transition-transform duration-700 hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <h3 class="absolute bottom-4 left-4 text-white text-xl font-bold">结构坐标</h3>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">探索并查看游戏中各种独特结构的精确坐标，包括遗迹、村庄和自然奇观等。</p>
                        <a href="#structures" class="mt-4 inline-block text-primary hover:text-primary/80 text-sm font-medium">
                            查看详情 <i class="fa fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>

                <!-- 帖子功能 -->
                <div class="feature-card bg-gray-50 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow">
                    <div class="feature-image h-48 relative overflow-hidden">
                        <img src="images/blogs/1.png" alt="玩家帖子" class="w-full h-full object-cover transition-transform duration-700 hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <h3 class="absolute bottom-4 left-4 text-white text-xl font-bold">玩家帖子</h3>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">浏览玩家分享的游戏心得、攻略和精彩瞬间，加入社区讨论。</p>
                        <a href="#blog" class="mt-4 inline-block text-primary hover:text-primary/80 blog-nav-link font-medium">
                            
                            查看详情 <i class="fa fa-arrow-right ml-1"></i>
                        </a>
                    </div>
                </div>

                <!-- 预留功能位置 -->
                <div class="feature-card bg-gray-50 rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-shadow">
                    <div class="feature-image h-48 relative overflow-hidden bg-gray-200">
                        <div class="absolute inset-0 flex items-center justify-center">
                            <i class="fa fa-puzzle-piece text-5xl text-gray-400"></i>
                        </div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <h3 class="absolute bottom-4 left-4 text-white text-xl font-bold">更多功能</h3>
                    </div>
                    <div class="p-4">
                        <p class="text-gray-600 text-sm">更多精彩功能即将上线，敬请期待...</p>
                        <span class="mt-4 inline-block text-gray-400 text-sm font-medium">
                            开发中 <i class="fa fa-spinner fa-spin ml-1"></i>
                        </span>
                    </div>
                </div>
            </div>
        </section>

        <!-- 结构列表 -->
        <section id="structures" class="space-y-6">
            <!-- 一区内容 -->
            <div id="server1Content">
                <!-- 结构卡片将通过JavaScript动态生成 -->
            </div>
            
            <!-- 二区内容 -->
            <div id="server2Content" class="hidden">
                <!-- 结构卡片将通过JavaScript动态生成 -->
            </div>
        </section>

        <!-- 新增坐标立体图部分 -->
        <section id="3d-coordinates" class="mt-16 mb-16">
            <div class="bg-white rounded-xl shadow-soft p-6">
                <h2 class="text-2xl font-bold text-dark mb-6">坐标立体图</h2>
                <p class="text-gray-600 mb-6">3D可视化展示所有服务器的坐标点，可使用鼠标旋转、缩放和平移视图。</p>
                
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                    <!-- 3D Visualization Area -->
                    <div class="lg:col-span-3 bg-white rounded-xl shadow-soft p-4 h-[600px]">
                        <div id="canvas-container" class="w-full h-full rounded-lg overflow-hidden border border-slate-200"></div>
                    </div>
                    
                    <!-- Points List -->
                    <div class="lg:col-span-1 bg-white rounded-xl shadow-soft p-4 h-[600px] overflow-y-auto">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fa fa-list-ul text-primary mr-2"></i> 坐标点列表
                        </h3>
                        <div id="points-list" class="space-y-3">
                            <!-- 坐标点将通过JavaScript动态生成 -->
                        </div>
                    </div>
                </div>
                
                <!-- Controls -->
                <div class="mt-6 flex flex-wrap gap-4 justify-center">

                    <!-- 新增结构筛选下拉框 -->
                    <div class="relative">
                        <select id="structure-filter" class="appearance-none px-4 py-2 pr-8 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-all focus:outline-none focus:ring-2 focus:ring-primary">
                            <option value="all">所有结构</option>
                            <!-- 结构选项将通过JavaScript动态添加 -->
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-white">
                            <i class="fa fa-chevron-down text-xs"></i>
                        </div>
                    </div>

                    <button id="reset-view" class="flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-all">
                        <i class="fa fa-refresh mr-2"></i> 重置视图
                    </button>
                    <button id="show-axes" class="flex items-center px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-all">
                        <i class="fa fa-arrows mr-2"></i> 显示/隐藏坐标轴
                    </button>
                    <button id="show-labels" class="flex items-center px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-all">
                        <i class="fa fa-tag mr-2"></i> 显示/隐藏标签
                    </button>
                </div>
                
            </div>
        </section>
    </main>

    <!-- 博客页面 -->
    <section id="blog-page" class="hidden container mx-auto px-4 pt-24 pb-16">
        <div class="mb-12 text-center">
            <h2 class="text-[clamp(1.8rem,4vw,2.5rem)] font-bold text-dark mb-4">Baka 村帖子</h2>
            <p class="text-gray-600 max-w-2xl mx-auto">这里是玩家们分享的各种帖子，包括游戏心得、攻略和合影。</p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="blog-posts-container">
            <!-- 帖子内容将通过JavaScript动态生成 -->
        </div>
    </section>

    <!-- 帖子详情模态框 -->
    <div id="postDetailModal" class="fixed inset-0 z-50 hidden items-center justify-center chart-modal-backdrop p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 chart-modal-content max-w-4xl w-95 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-dark" id="postDetailTitle">帖子详情</h3>
                <button id="closePostDetailModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div class="relative">
                <!-- 帖子图片 - 自适应高度并显示完整图片 -->
                <div id="postDetailImage" class="w-full mb-6 rounded-lg structure-image bg-contain bg-no-repeat bg-center" style="min-height: 200px;"></div>
                
                <!-- 帖子元数据 -->
                <div class="flex flex-wrap justify-between items-center mb-6 text-sm text-gray-500">
                    <div class="flex items-center gap-4">
                        <span><i class="fa fa-user mr-1"></i> <span id="postDetailAuthor"></span></span>
                        <span><i class="fa fa-calendar mr-1"></i> <span id="postDetailDate"></span></span>
                    </div>
                    <span class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs" id="postDetailCategory"></span>
                </div>
                
                <!-- 帖子内容 -->
                <div id="postDetailContent" class="post-detail-content text-gray-700"></div>
            </div>
        </div>
    </div>

    <!-- 关于我们 -->
    <section id="about" class="bg-white py-12">
        <div class="container mx-auto px-4">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold text-dark mb-4">关于 Baka 村</h2>
                <p class="text-gray-600 max-w-3xl mx-auto">我们是一群热爱《我的世界》的玩家，致力于收集和分享游戏中各种独特结构的坐标，让大家的游戏体验更加丰富多彩。</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="bg-gray-50 rounded-xl p-6 shadow-md">
                    <div class="text-primary text-3xl mb-4">
                        <i class="fa fa-map-signs"></i>
                    </div>
                    <h3 class="text-xl font-bold text-dark mb-3">结构坐标库</h3>
                    <p class="text-gray-600">我们收集了各种稀有和独特的结构坐标，包括遗迹、自然奇观和特殊地点，让你无需探索即可轻松找到它们。</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6 shadow-md">
                    <div class="text-primary text-3xl mb-4">
                        <i class="fa fa-users"></i>
                    </div>
                    <h3 class="text-xl font-bold text-dark mb-3">社区共享</h3>
                    <p class="text-gray-600">Baka 村是一个开放的社区，所有玩家都可以贡献自己发现的坐标，与其他玩家分享游戏中的精彩发现。</p>
                </div>
                
                <div class="bg-gray-50 rounded-xl p-6 shadow-md">
                    <div class="text-primary text-3xl mb-4">
                        <i class="fa fa-gamepad"></i>
                    </div>
                    <h3 class="text-xl font-bold text-dark mb-3">游戏指南</h3>
                    <p class="text-gray-600">除了坐标库，我们还提供各种游戏攻略和指南，帮助你更好地探索《我的世界》的奇妙世界。</p>
                </div>
            </div>
            
            <div class="mt-12 text-center">
                <h3 class="text-2xl font-bold text-dark mb-6">加入我们</h3>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="#" class="px-6 py-3 bg-pink-500 text-white rounded-lg hover:bg-pink-600 transition-colors shadow-lg shadow-pink-200 flex items-center">
                        <i class="fa fa-youtube-play mr-2"></i> 哔哩哔哩
                    </a>
                    <a href="#" class="px-6 py-3 bg-white text-primary border border-primary rounded-lg hover:bg-primary/5 transition-colors flex items-center">
                        <i class="fa fa-qq mr-2"></i> QQ 群
                    </a>
                    <a href="#" class="px-6 py-3 bg-dark text-white rounded-lg hover:bg-dark/90 transition-colors flex items-center">
                        <i class="fa fa-github mr-2"></i> GitHub
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- 坐标分布大图模态框 -->
    <div id="chartModal" class="fixed inset-0 z-50 hidden items-center justify-center chart-modal-backdrop">
        <div class="bg-white rounded-xl shadow-2xl p-6 chart-modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-dark" id="modalChartTitle">坐标分布详情</h3>
                <button id="closeChartModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fa fa-times text-xl"></i>
                </button>
            </div>
            <div class="relative h-[calc(80vh-80px)]">
                <canvas id="modalChart" class="w-full h-full"></canvas>
            </div>
        </div>
    </div>

    <!-- 评论容器 -->
    <div id="comments" class="container mx-auto px-4 mb-12">
        <div id="gitalk-container" class="bg-white rounded-xl shadow-md p-6"></div>
    </div>

    <footer class="bg-white shadow-md py-6">
        <div class="container mx-auto px-4 text-center text-gray-600">
            <p>&copy; 2025 Baka 村结构坐标库. 保留所有权利.</p>
        </div>
    </footer>

    <!-- 引入外部 JavaScript 文件 -->
    <script src="data/structures.js"></script>
    <script src="data/blog-posts.js"></script>
    <script src="js/coordinates.js"></script>
    <script src="js/blog.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
</body>
</html>
